<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punk API</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script>
        //      https://github.com/larsha/bolaget.io
        //      BreweryDB - API-key: 7c3c827d07c560a0ff836f3b889f32e8


        window.addEventListener("load", function() {
            let searchBeerBtn = document.getElementById("searchBeerBtn");
            let searchBeerInput = document.getElementById("searchBeerInput");

            function printOut(db) {
                let container = document.getElementsByClassName("container")[0];
                container.innerHTML = "";
                for (let i = 0; i < db.length; i++) {

                    let content = {
                        div: document.createElement("div"),
                        img: document.createElement("img"),
                        beerName: document.createElement("h2"),
                        tagline: document.createElement("h5"),
                        info: document.createElement("p"),
                    }

                    content.div.setAttribute("class", "card-body beer");
                    content.img.setAttribute("src", db[i].image_url);
                    content.img.setAttribute("height", "140px");
                    content.beerName.innerText = db[i].name;
                    content.tagline.innerText = db[i].tagline;
                    content.info.innerText = db[i].description;

                    content.div.appendChild(content.img);
                    content.div.appendChild(content.beerName);
                    content.div.appendChild(content.tagline);
                    content.div.appendChild(content.info);

                    container.appendChild(content.div);
                }
            }

            searchBeerBtn.addEventListener("click", function() {
                let value = searchBeerInput.value;
                console.log(value)
                fetch("https://api.punkapi.com/v2/beers?beer_name=" + value)
                    .then(function(test) {
                        return test.json();
                    })
                    .then(function(json) {
                        let db = json;
                        console.log(db);
                        printOut(db);
                    })
                    .catch(function(error) {
                        console.log(error);
                    })
            })


        })

    </script>
    <style>
        img {
            float: left;
            margin-right: 15px;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .beer {
            margin: 0 auto;
            background-color: rgba(61, 100, 61, 0.7);
/*            margin: 30px;*/
            margin-top:30px;
            box-shadow: 5px 5px black;
            padding: 20px;
            width: 700px;
            height: auto;
        }
        .beer:last-child {
            margin-bottom:30px;
        }

    </style>
</head>

<body>
    <nav>
        <input id="searchBeerInput" type="search" placeholder="Search for a beer">
        <button id="searchBeerBtn" class="btn btn-secondary">Search beer!</button>
    </nav>


    <br>
    <div class="container card">

    </div>

</body>

</html>
